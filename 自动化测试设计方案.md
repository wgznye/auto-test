
# 1. 概述

需求测试需要解决的问题：

1. 手动测试速度较慢，无法快速执行大量的测试用例。
2. 手动测试容易出现测试人员疲劳和注意力不集中的情况，导致测试结果不一致。
3. 手动测试往往无法覆盖所有的测试场景和边界条件，可能会导致遗漏重要的测试用例。
4. 手动测试难以重复执行相同的测试用例，导致无法及时发现并复现问题。
5. 手动执行回归测试需要大量的人力资源和时间成本，且难以确保每次测试都包含相同的测试用例。
6. 手动测试无法满足快速迭代和频繁发布的需求，无法有效支持持续集成和持续交付流程。
7. 手动测试难以进行测试进度跟踪、结果分析和问题管理，容易导致测试过程混乱和不可控。

为解决上述问题，引入了自动化测试的概念

## 1.1 什么是自动化测试?

自动化测试是利用软件工具和脚本来执行测试用例，验证软件系统的功能、性能和稳定性的过程。自动化测试通过编写脚本和使用自动化测试工具来模拟用户的行为和操作，自动化地执行测试用例，并比较实际结果与预期结果，从而评估软件系统的质量。

自动化测试通常涵盖以下几个方面：
1. 功能测试：验证软件系统的各个功能是否按照要求正常工作，包括对输入、输出和业务逻辑的测试。
2. 回归测试：在软件系统发生变更后，自动化执行之前编写的测试用例，以确保新的更改没有引入新的问题或破坏现有功能。
3. 性能测试：通过模拟多种负载情况和场景来评估软件系统的性能指标，如响应时间、吞吐量和资源利用率等。
4. 安全测试：模拟各种安全攻击和恶意行为，评估软件系统的安全性能，并发现潜在的安全漏洞和风险。
5. 接口测试：测试软件系统与其他系统或组件之间的接口和集成，确保数据传输和交互的正确性和稳定性。

### 1.1.2 为什么使用自动化测试？

1. 自动化测试可以快速执行大量测试用例，比手动测试更快速、更高效。
2. 提高效率：自动化测试可以快速执行大量测试用例，比手动测试更快速、更高效。
3. 提高测试覆盖率：自动化测试可以覆盖更广泛的测试场景和测试用例，确保对软件系统的各个方面进行全面测试。
4. 减少人为错误：自动化测试减少了人工测试过程中的人为错误和遗漏，提高了测试结果的准确性和可靠性。
5. 支持持续集成和持续交付：自动化测试是持续集成和持续交付流程的关键组成部分，可以帮助团队更快速地检测和修复问题，并实现更快速的软件发布。
6. 节省成本：虽然在开始阶段需要投入一定的时间和资源编写自动化测试脚本，但长期来看，可以降低测试成本，提高软件质量。
7. 增强稳定性：自动化测试可以重复执行测试用例，确保每次测试都以相同的方式执行，提高了测试结果的一致性和可靠性。
8. 提高开发人员的信心：自动化测试可以帮助开发人员及时发现和解决问题，提高了软件开发过程中的信心和效率。
9. 节省时间：自动化测试可以在软件开发过程中提前发现问题，减少了后期修复问题的时间和成本。

# 2 自动化分类
## 2.1 自动化测试可以根据不同的标准进行分类。以下是几种常见的分类方式
### 2.1.1 按照测试对象分类：
1. UI自动化测试：针对用户界面的自动化测试，通常通过模拟用户操作来测试应用程序的用户界面。
2. API自动化测试：针对应用程序的接口进行自动化测试，通常通过发送API请求并验证响应来测试接口的功能和性能。
3. 功能自动化测试：针对应用程序的功能进行自动化测试，包括UI测试和API测试等。
4. 性能自动化测试：评估应用程序性能的自动化测试，通常通过模拟负载并测量响应时间、吞吐量等指标来进行。

### 2.1.2 按照执行方式分类：
1. 脚本驱动的自动化测试：使用脚本编写测试用例，并通过自动化工具执行。
2. 数据驱动的自动化测试：将测试数据与测试逻辑分离，以便更灵活地执行相同的测试用例，通常采用数据驱动测试框架。
3. 关键字驱动的自动化测试：使用关键字来描述测试步骤和操作，以提高测试用例的可读性和维护性。

### 2.1.3 按照覆盖范围分类：
1. 回归测试：用于验证已经修改的代码是否影响了现有功能的自动化测试。
2. 集成测试：用于验证不同组件或模块之间的集成是否正常工作的自动化测试。
3. 单元测试：用于验证单个代码单元的功能是否正确的自动化测试。

### 2.1.4 按照技术分类：
1. 基于框架的自动化测试：使用现有的自动化测试框架，如Selenium、Appium等。
2. 自定义脚本的自动化测试：根据项目需求编写自定义的测试脚本，而不依赖于特定的测试框架。

### 2.1.5 按照执行环境分类：
1. 桌面应用程序自动化测试：针对桌面应用程序的自动化测试。
2. Web应用程序自动化测试：针对Web应用程序的自动化测试。
3. 移动应用程序自动化测试：针对移动应用程序的自动化测试。

# 3 UI自动化测试工具选择：
## 3.1 Selenium
Selenium是最早的自动化测试框架之一。它支持多种编程语言，包括Java、Python、JavaScript等。Selenium可以与各种主流浏览器兼容，如Chrome、Firefox、Edge等。
Selenium的核心是webdriver。webdriver通过向浏览器发送指令来控制浏览器里加载的页面元素,进而完成和用户一样的页面操作。
Selenium WebDriver已经到了4.x时代，它运行在浏览器中，通过调用浏览器原生API来实现对浏览器的控制，因为调用的是浏览器原生API，所以对于同样的元素操作，Selenium需要针对不同的浏览器提供相应的WebDriver
### 优点：
1. 跨浏览器兼容性：支持多种主流浏览器，如Chrome、Firefox、Safari等。
2. 多语言支持：可以使用多种编程语言编写测试脚本，如Java、Python、C#等。
3. 灵活性：提供丰富的API，可以执行各种操作，如点击、输入、选择等。
4. 开源：免费使用和定制，有庞大的社区支持。
5. 成熟稳定：作为行业标准的自动化测试工具，拥有广泛的应用和文档资源。
#### 缺点：
1. 学习曲线：对于一些复杂的网页元素和交互，编写稳定的测试用例可能需要更多的代码和技巧。
2. 维护成本：随着应用程序的更新和修改，需要不断调整和维护测试脚本。例如:Chrome升级后需要修改配置文件中的webdriver的版本号，
3. Selenium的速度相对较慢，因为它是基于浏览器驱动的。
###
可以使用隐式等待（implicit wait）和显式等待（explicit wait）来实现动态等待。隐式等待会在查找元素时等待一定的时间，而显式等待则会等待特定的条件满足后再继续执行代码。

## 3.2 Cypress
Cypress是一个专注于现代Web应用程序的端到端测试工具。与Selenium不同，Cypress设计用于提供更高效的测试开发体验。它提供了一个简单而强大的API，允许测试人员轻松地编写、运行和调试测试用例。Cypress还具有实时重新加载和调试功能，可显着提高测试开发速度。
#####
编程语言：JavaScript
#####

### Cypress的工作原理
Cypress 是在测试开始并首次加载Cypress时，Cypress Web内部应用程序先把自己托管到本地的一个随机端口上，然后使用webpack将测试代码中的所有模块绑定到同一个JavaScript文件中，启动指定的浏览器，并将测试代码注入到空白页面里，同时运行测试代码。

### 优点：
1. 专注于现代Web应用程序的端到端测试，提供了简单易用的API和工具。
2. 提供了实时重新加载和调试功能，使得编写和调试测试用例更加高效。
3. 自带的断言库和调试器可以简化测试用例的编写和调试过程。
4. 与浏览器的集成更深，可以访问更多底层API，因此速度更快。
### 缺点：
1. 跨浏览器兼容性：仅Chrome、Firefox浏览器。
2. 相较于Selenium，Cypress的生态系统相对较小，可能缺乏一些扩展功能。
3. 仅支持JavaScript，不支持其他编程语言。
### 
在 Cypress 中，Cypress 会自动等待页面加载完成，并且可以使用 cy.wait() 命令来等待特定的条件。此外，Cypress 还提供了许多针对等待和超时的选项，如 timeout、retryInterval 等。
## 3.3 Robot Framework
Robot Framework是一个通用的自动化测试框架，采用关键字驱动的方法。它具有易读性和可维护性，使得非技术人员也能参与测试用例的编写。Robot Framework支持多种测试库，包括SeleniumLibrary，这使得它可以用于测试Web应用程序。同时，它还支持通过自定义关键字扩展其功能。
### 优点：
1. 可读性强，使用关键字驱动的测试方法，使得非技术人员也能参与测试用例的编写。
2. 支持插件化，可以通过扩展库轻松地扩展其功能。
3. 能够与Selenium等其他测试工具集成，提供了更丰富的功能和灵活性。
4. 有丰富的文档和社区支持。
### 缺点：
1. 速度相对较慢，尤其是当测试用例变得复杂时。
2. 执行大规模测试套件时，可能会遇到性能问题。
3. 对于一些定制化的需求，需要编写更多的自定义关键字和扩展。
4. 社区支持：虽然有活跃的社区，但相对于Selenium来说规模较小。
### 特点
Robot Framework支持用Python或Java编写的库

## 3.4 Playwright
Playwright是一个由Microsoft开发的自动化测试工具，专注于Web应用程序测试。它支持多种编程语言，包括JavaScript、Java、Python等。Playwright的独特之处在于其跨浏览器和跨平台的能力，以及其强大的API和功能，可以模拟各种用户交互，从而实现更复杂的测试场景。
跨浏览器：Playwright 支持所有现代渲染引擎，包括Chromium、WebKit 和 Firefox；
跨平台：在 Windows、Linux 和 MacOS 上进行本地或 CI、无头或有头测试;
跨语言：在 Java、Python、JavaScript、.NET 中使用Playwright API;
测试移动网络：适用于 Android 和 Mobile Safari 的 Google Chrome 原生移动仿真。
#####
#####
编程语言：Java、Python、JavaScript、.NET
#####
### 1、优缺点
### 优点：
1. 支持多种编程语言，包括JavaScript、Python、C#等。
2. 支持跨浏览器和跨平台测试。
3. 提供了快速和可靠的测试执行，可以在多个浏览器同时运行测试用例。
4. 有丰富的API和功能，可以模拟各种复杂的用户交互
### 缺点：
1. 相对较新，生态系统相对较小，可能缺乏一些成熟的插件和工具支持
2. 由于其强大的功能和灵活性，学习曲线可能往后越来越难。
3. 对于一些特定的测试场景，可能需要编写更多的自定义代码
### 1、特点
1、在Playwright中，默认是在后台运行浏览器，这样可以提高测试的效率和稳定性。
2、在 Playwright 中，可以使用 waitForSelector()、waitForFunction() 等方法来实现动态等待。这些方法可以等待特定的元素或条件出现后再继续执行代码。
3、可自动生成测试用例
``` 
playwright codegen https://test1-trade.shanghaishulian.com/
``` 

| 功能/特性         | Selenium                                      | Cypress                          | Playwright                                | Robot Framework                              |
|----------------|-----------------------------------------------|----------------------------------|-------------------------------------------|----------------------------------------------|
| 浏览器支持         | 支持多种浏览器，包括 Chrome、Firefox、IE 等。            | 主要支持现代浏览器，如 Chrome、Firefox、Edge 等。 | 支持多种浏览器，包括 Chrome、Firefox、Safari 等。         | 不直接支持浏览器，但可通过 SeleniumLibrary 等集成库支持多种浏览器。            |
| 语言支持          | 支持多种编程语言，如 Java、Python、JavaScript 等。        | 主要使用 JavaScript 编写测试脚本。          | 支持多种编程语言，如 JavaScript、Python、Java 等。          | 支持多种编程语言，包括 Python、Java、.NET 等。                |
| 定位元素          | 使用类似于 CSS 选择器、XPath 等定位策略。             | 使用类似于 jQuery 选择器的语法定位元素。         | 使用类似于 CSS 选择器、XPath 等定位策略。                | 使用类似于 CSS 选择器、XPath 等定位策略。                  |
| 执行速度          | 比较慢，因为使用 WebDriver 协议与浏览器通信。          | 相对较快，因为是在浏览器上运行的本地测试工具。          | 较快，因为使用自己的执行环境和驱动程序直接与浏览器交互。       | 取决于所使用的测试库和驱动程序。                           |
| 调试和交互性        | 相对较弱，通常需要借助 IDE 或调试器进行调试。          | 提供丰富的调试工具和交互性，可实时改变测试步骤、查看测试执行情况等。 | 提供丰富的调试工具和交互性，可在测试运行时动态查看和调试测试用例。    | 相对较弱，通常需要借助 IDE 或调试器进行调试。                  |
| 报告生成          | 需要借助第三方库或插件来生成测试报告，如 TestNG、ExtentReports 等。 | 支持生成 HTML、JSON、JUnit XML 等格式的测试报告。 | 支持生成 HTML、JSON、JUnit XML 等格式的测试报告。          | 支持生成 HTML、XML 等格式的测试报告，也可通过第三方库扩展报告功能。      |
| 学习曲线          | 相对较陡，需要掌握 WebDriver 协议和相应的编程语言。       | 相对平缓，易于学习和上手，尤其适合非程序员或初学者使用。     | 较为平缓，但需要掌握基本的编程和测试知识。                 | 相对平缓，易于学习和上手，尤其适合非程序员或初学者使用。             |
| 社区和生态系统       | 拥有庞大的社区和丰富的生态系统，有大量的扩展库和插件可供选择。   | 相对较小，但快速发展，社区支持和插件数量逐渐增加。        | 相对较小，但社区和生态系统在不断增长，受到了开发者的关注。       | 拥有庞大的社区和丰富的生态系统，有大量的扩展库和插件可供选择。           |

# 4 接口自动化测试
接口自动化测试是指通过编写脚本来自动化执行应用程序接口（API）的测试过程。这些接口可以是Web服务的API、数据库接口或者其他应用程序的接口。
## 4.1 为什么要用接口自动化测试？
##### 提高效率和速度： 自动化测试可以快速执行，比手动测试更高效。它可以在较短的时间内执行大量的测试用例，并且可以在开发过程中持续集成，从而提高软件交付速度。
##### 增加测试覆盖范围：自动化测试可以覆盖大量的测试场景，包括边界条件、异常情况等，确保软件的质量和稳定性。
##### 节省成本：尽管在开始阶段需要投入一定的时间和资源编写测试脚本，但长期来看，自动化测试可以大大节省测试成本。它减少了人工测试所需的时间和人力成本，并降低了由于人为错误而导致的问题。
##### 可重复性和一致性：自动化测试可以确保每次测试都是在相同的环境和条件下执行，从而提高了测试的可重复性和一致性。
##### 提高质量：通过自动化测试可以及早发现和修复软件中的问题，从而提高软件的质量，并减少在生产环境中出现的故障。
## 4.2 接口自动化测试的优点
### 4.2.1 可靠性： 
自动化测试可以减少人为错误的可能性，提高测试的准确性和可靠性。
### 4.2.2 高效性： 
自动化测试可以在短时间内执行大量的测试用例，提高测试效率。
### 4.2.3 可重复性： 
自动化测试可以确保每次测试都是在相同的环境和条件下执行，从而保证测试结果的可重复性。
### 4.2.4 提前发现问题： 
自动化测试可以及早发现软件中的问题，使得问题可以在开发过程中被及时修复，从而降低了修复成本。
## 4.3 接口自动化测试的缺点
### 4.3.1 初期投入成本高： 
编写和维护测试脚本需要一定的时间和技能投入，初期的成本可能较高。
### 4.3.2 不适用于所有场景： 
某些测试场景可能不适合自动化测试，比如图形用户界面（GUI）的测试、人机交互等场景。
### 4.3.3 难以处理动态变化： 
当接口或系统的变化频繁时，测试脚本的维护可能会变得困难，需要花费额外的时间和精力。
### 4.3.4 无法完全取代人工测试： 
尽管自动化测试可以提高测试效率和覆盖范围，但某些场景仍需要人工测试来进行验证和确认。
## 4.4 接口测试范围
##### 接口类型：包括但不限于HTTP/HTTPS、SOAP、REST等。此外，还可以考虑测试不同的协议和数据格式，如JSON、XML等。
##### 明确接口提供的功能，包括用户身份验证、数据查询、数据修改、文件上传下载等。确保测试覆盖到接口的各项功能。
##### 接口参数：测试不同的接口参数组合，包括必填参数、可选参数、参数的边界条件等。验证接口在不同参数组合下的行为和响应。
##### 异常情况：测试接口在异常情况下的处理能力，包括参数缺失、参数格式错误、权限不足、服务器错误等。确保接口能够正确地处理异常情况并返回合适的错误信息。
##### 版本兼容性：对于已发布的接口，可以考虑测试其与之前版本的兼容性。确保新版本的接口不会破坏与旧版本的兼容性。
##### 集成测试：如果系统由多个服务组成，可以考虑进行接口的集成测试，验证各个服务之间的通信和协作是否正常。
##### 安全性：测试接口的安全性，包括身份验证、数据加密、防止SQL注入、防止跨站脚本攻击等。确保接口在安全方面的设计和实现符合要求。
##### 性能和负载：除了功能测试，还可以考虑接口的性能和负载测试。验证接口在高并发、大数据量情况下的响应时间和稳定性。
## 4.5 接口自动化测试工具
Python+Requests+Pytest+Allure
### 4.5.1 用python做接口自动化测试的优势：
##### 4.5.1.1 易学易用： 
Python是一种简洁而强大的编程语言，语法清晰简单，易于学习和上手。这使得编写、维护和理解测试脚本都变得更加容易。
##### 4.5.1.2 丰富的库和框架： 
Python拥有丰富的第三方库和框架，其中包括许多用于接口测试的工具和库，例如Requests、Pytest、unittest等。这些库和框架提供了丰富的功能和灵活性，使得接口自动化测试的实现更加方便。
##### 4.5.1.3 跨平台支持： 
Python是一种跨平台的编程语言，可以在各种操作系统上运行，包括Windows、Linux、Mac等。这意味着你可以在不同的环境下执行相同的测试脚本，无需担心平台兼容性的问题。
##### 4.5.1.4 强大的社区支持： 
Python拥有庞大而活跃的开发者社区，你可以轻松地找到大量的教程、文档、示例代码以及社区支持。如果在测试过程中遇到问题，很可能已经有其他开发者遇到并解决了类似的问题。
##### 4.5.1.5 灵活性和可扩展性： 
Python是一种高级编程语言，具有很高的灵活性和可扩展性。你可以根据需要轻松地扩展和定制测试框架，满足不同项目和团队的需求。
##### 4.5.1.6 与其他工具和技术的集成： 
Python可以与许多其他工具和技术进行集成，如数据库、测试报告生成工具、持续集成工具等。这使得接口自动化测试与其他部分的集成变得更加简单和灵活。
### 4.5.2 Requests
##### 简化接口测试编写：
Requests库是 Python 的一个优雅且简单的 Http库，可以很方便地发送 http 请求，接收和处理接口返回的响应数据。
### 4.5.3 Pytest
##### 强大的断言和校验功能：
Pytest 是一个功能强大的测试框架，提供丰富的断言功能，用于验证接口响应的正确性。
### 4.5.4 Allure
##### 美观的测试报告：
Allure是一个开源的测试报告生成工具，可以生成漂亮、交互式和易于理解的测试报告。



## 4.6 自动化测试质量保证
质量保证（QA）是一个涉及整个软件开发过程的方法，旨在确保最终产品的质量符合预期标准。它不仅仅是在软件开发后进行测试，而是在整个开发周期中进行质量管理和控制。以下是质量保证的一些详细方面：
#### 4.6.1 需求分析：
首先，对系统的需求进行仔细分析。确保对系统的所有功能和特性有清晰的理解。
#### 4.6.2 测试用例设计： 
基于需求分析，设计测试用例。测试用例应该覆盖系统的各个功能模块，并考虑到各种可能的输入和场景。
#### 4.6.3 边界条件： 
确保测试用例覆盖各种边界条件，例如输入值的最大值、最小值、边界值、空值等。
#### 4.6.4 异常情况： 
设计测试用例来验证系统对于异常情况的处理能力，例如错误的输入、网络中断、系统崩溃等。
#### 4.6.5 集成测试： 
确保测试覆盖到系统的集成部分，包括不同模块之间的交互和通信。
#### 4.6.6 性能测试： 
设计性能测试用例来评估系统的响应时间、负载能力等性能指标。
#### 4.6.7 安全性测试： 
确保测试覆盖到系统的安全性方面，例如身份验证、权限控制等。
#### 4.6.8 可靠性测试： 
测试系统的可靠性，包括稳定性、容错性等方面。
#### 4.6.9 持续集成和持续部署：
团队需要不断地反思和改进自己的工作方式和产品质量。这可以通过定期的回顾会议、根因分析、缺陷跟踪和持续集成等方法来实现。
确保自动化测试能够集成到持续集成和持续部署流程中，以确保每次代码更改都能够进行全面的测试。
#### 4.6.10 测试覆盖率： 
使用工具来评估测试覆盖率，确保测试用例覆盖到了代码的各个部分。
#### 4.6.11 反馈机制： 
建立反馈机制，定期评估测试结果并对测试标准进行修订和优化，以确保测试能够持续有效地覆盖到系统的各个方面。








